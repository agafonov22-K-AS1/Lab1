# Lab1
## Авторы: Агафонов Александр, Жданько Алексей, Пасеченко Иван.

## 1. Введение
- **Цель работы:** Изучение IDA Pro на примере анализа APK-файла
- **Объект исследования:** Android приложение с нативными библиотеками
- **Методика:** Статический анализ с помощью IDA Pro 9.2+

## 2. Подготовка образца
- **Источник:** VX-Underground Samples
- **Тип файла:** APK (Android Package)
- **Размер:** ~7 MB
- **Основные компоненты:** classes.dex, нативные библиотеки (.so)

## 3. Анализ структуры APK
### 3.1. Состав файлов
- classes.dex (6.8 MB) - Java-код приложения
- lib/armeabi/*.so - нативные библиотеки ARM
- lib/mips/*.so - нативные библиотеки MIPS

### 3.2. Ключевые библиотеки
1. **libO_All.so** (2.6 MB) - основная бизнес-логика и криптография
2. **libhhtrade.so** (3.0 MB) - возможная финансовая логика
3. **libanychatcore.so** - функции видеокоммуникации
4. **libbdpush_V2_*.so** - push-уведомления (Baidu)

## 4. Анализ нативных библиотек в IDA Pro
### 4.1. Библиотека libO_All.so
#### Экспортируемые функции:
- Криптографические функции NSS (Mozilla)
- SSL/TLS функции
- SQLite операции
- Функции проверки лицензии (itrus_*)

#### Импортируемые функции:
- Системные вызовы (geteuid, clock_gettime)
- Сетевые функции (connect, recv)
- Функции защиты (__stack_chk_guard)

### 4.2. Обнаруженные механизмы защиты
- **Проверка лицензии:** `itrus_Has_Info_License()`
- **Работа с БД:** SQLite для хранения лицензионных данных
- **Криптография:** RSA, SSL через NSS
- **Проверка окружения:** geteuid(), системные вызовы

## 5. Анализ Java-кода (classes.dex)
### 5.1. Использование IDA для DEX
- IDA отображает структуры классов
- Видны Protobuf описания
- Base64 кодирование/декодирование

### 5.2. Ограничения IDA для Java-анализа
- Отсутствие декомпиляции в читаемый Java-код
- Нет графа вызовов между Java-методами
- Рекомендовано использовать JADX для Java-части

## 6. Выводы о функционале приложения
### 6.1. Основное назначение
- Приложение для безопасных коммуникаций (видео/аудио)
- Имеет встроенную систему лицензирования
- Использует криптографию для защиты данных

### 6.2. Механизмы работы
1. **Проверка лицензии:** через нативный код (itrus функции)
2. **Хранение данных:** SQLite БД
3. **Сетевое взаимодействие:** SSL/TLS, Protobuf
4. **Защита:** проверка целостности, anti-debug техники

## 7. Заключение
- Был изучен функционал IDA Pro
- Для полного анализа Android приложений нужна комбинация инструментов
- Изученный образец демонстрирует современные техники защиты приложений
